---
alwaysApply: true
---

# データベース設計

## データベース操作の原則
- Eloquent ORM使用必須
- 生のSQLクエリ使用禁止
- `DB::`ではなく`Model::query()`使用
- N+1問題への対策必須（先読み込み使用）
- リレーションシップメソッドに戻り値の型ヒント必須

## マイグレーション作成規則
- `sail artisan make:migration` 使用
- カラム変更時は以前の全属性を含める
- 適切なインデックス設定
- 外部キー制約の明示

## 実装済みテーブル

### users（認証システムで自動作成済み）
- id
- name
- email
- password

<!-- ここから段階的に追加 -->
